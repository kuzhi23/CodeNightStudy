<!--
파일 이름은 날짜-카테고리 (예시: 2021-03-21-network.md)
-->

[JavaScript] promise에 대해서 설명해 주세요

<br>

프로미스를 설명하기에 앞서서, 자바스크립트는 싱글 스레디드 언어로서, 한번에 하나의 명령만 처리할 수가 있습니다. 정리해서 자바스크립트는 동기적이면서 각 코드가 순서대로 실행됩니다.

브라우저에서는 어떤 작업이 완료되기 전에 다음 작업을 수행할 수 없는 블로킹이 일어나기 때문에, 자바스크립트는 비동기 프로그래밍을 사용해 요청을 보낸 후, 응답에 관계 없이 바로 다음 동작을 이어서 실행하게 됩니다.

이렇게 되면 비동기 함수들은 특정 코드의 실행이 끝나기 전에 계속 다음 코드를 실행하기 때문에, 실행이 서로 연관되어있는 코드가 있을 경우 에러가 발생할 수 있습니다.

이러한 비동기 처리 방식의 문제를 해결하기 위해 콜백 함수를 사용할 수 있는데, 비동기를 순서대로 처리하기 위해 콜백 함수를 계속 중첩하여 사용하다 보면 depth가 깊어져 콜백 지옥이 생길 수 있습니다. 이러한 콜백 지옥은 가독성을 떨어뜨리기 때문에 지양하는 것이 좋습니다.

이 콜백 지옥을 해결할 수 있는 방법 중의 하나가 프로미스인데, 이 프로미스는 비동기적인 함수를 바로 실행하는 대신, 마치 동기 함수처럼, 비동기 작업이 완료된 후의 값을 객체로 받아 반환하게 됩니다. new 키워드를 통해 생성되는 인스턴스는 resolve와 reject 메소드를 인자로 받고, resolve 메소드의 경우 비동기 작업 성공 시 주어진 결과값을 담은 프로미스 객체를 반환하게 되고, reject 메소드의 경우 비동기 작업 실패 시 에러 값을 담은 프로미스 객체를 반환하게 됩니다.

프로미스는 세 가지 상태를 가지게 되는데, 대기 상태는 비동기 처리가 완료되지 않는 초기 상태이고, 이행 상태는 비동기 작업이 성공적으로 완료되어 resolve가 호출된 상태이고, 거부 상태는 비동기 작업 중 오류가 발생하여 reject를 호출한 상태를 가리킵니다.

또한 프로미스는 then 메소드를 통한 체이닝이 가능한데, 순차적으로 이전 단계의 비동기 작업이 성공하고 나서 다음 비동기 작업을 실행할 때 그 이전 단계의 결과값을 사용할 수 있습니다.

